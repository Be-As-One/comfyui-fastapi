# 应用环境配置
APP_ENV=dev
HOST=127.0.0.1
PORT=8001

# 任务管理器类型: 'memory' 或 'redis'
# memory: 内存模式，适合开发和单机部署
# redis: Redis模式，适合生产和分布式部署
TASK_MANAGER_TYPE=memory

# Redis配置（当TASK_MANAGER_TYPE=redis时需要）
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50

# Upstash Redis REST API 配置（远程 Redis，用于任务队列）
UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
UPSTASH_REDIS_REST_TOKEN=xxx

# 消费者模式: 'redis_queue' (Redis三级优先队列) 或 'http' (HTTP轮询)
CONSUMER_MODE=redis_queue

# 任务结果回调配置（GPU 处理完成后回调 z-image API）
TASK_CALLBACK_URL=https://your-z-image.com/api/comm/task/update
TASK_CALLBACK_TIMEOUT=30

# 任务API配置
TASK_API_URL=http://127.0.0.1:8001/api
API_KEY=
CONSUMER_TIMEOUT=30

# ComfyUI配置
COMFYUI_URL=http://127.0.0.1:3002
COMFYUI_READY_TIMEOUT=1000
COMFYUI_READY_INTERVAL=5
COMFYUI_READY_RETRIES=200

# 存储配置
STORAGE_PROVIDER=r2  # gcs, r2, cf_images（推荐使用 r2，与 aaaa 项目一致）

# Cloudflare R2 配置（推荐，环境变量名与 aaaa 项目一致）
R2_ACCOUNT_ID=your_account_id
R2_ACCESS_KEY_ID=your_access_key_id
R2_SECRET_ACCESS_KEY=your_secret_access_key
R2_BUCKET=your_bucket_name
R2_PUBLIC_URL=https://static.z-image.vip

# Google Cloud Storage 配置（已弃用）
# GCS_BUCKET_NAME=cdn-test-ai-undress-ai
# GCS_BUCKET_REGION=us-east-1
# CDN_URL=https://cdn.ai-undress.ai

# Cloudflare Images 配置
CF_IMAGES_ACCOUNT_ID=
CF_IMAGES_API_TOKEN=
CF_IMAGES_DELIVERY_DOMAIN=

# Face Swap Service 配置
FACE_SWAP_API_URL=http://localhost:8000
FACE_SWAP_TIMEOUT=300
FACE_SWAP_RETRY_COUNT=3
FACEFUSION_ROOT=/path/to/video-faceswap

# 工作流权限配置
# 允许的工作流列表（逗号分隔，支持通配符 *）
# 示例: "comfyui_*,basic_generation" 或 "*" 表示允许所有
ALLOWED_WORKFLOWS=*
LOG_FILTERED_TASKS=true

# 日志配置
LOG_LEVEL=DEBUG
LOG_FILE=logs/app.log

# 结果节点类型配置
RESULT_NODE_TYPES=SaveImage,PreviewImage,SaveAudio
